<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.bookspresso.mapper.search.SearchMapper">
    <select id="selectBook">
        select ISBN13, TITLE, DESCRIPTION, AUTHOR, COVER, LINK, TO_CHAR(PUBDATE,'YYYY,MM,DD')AS PUBDATE
        FROM TBL_BOOK
        WHERE ISBN13=#{isbn13}
    </select>

<select id="selectdebate">
    SELECT I.DEBATE_ID,T.MEETING_TYPE,P.DEBATE_TYPE, I.TITLE,I.OUTLINE,B.DESCRIPTION,B.AUTHOR,B.TITLE AS BOOK_TITLE,
           TO_CHAR(I.DEBATE_START_DATE,'YYYY-MM-DD')AS DEBATE_START_DATE, TO_CHAR(I.DEBATE_END_DATE,'YYYY-MM-DD')AS DEBATE_END_DATE,
           DB.DEBATE_BOOK_ID,DB.ISBN13,B.COVER
    FROM TBL_DEBATE I JOIN TBL_MEETING_TYPE T
                           ON I.MEETING_ID = T.MEETING_ID
                      JOIN TBL_DEBATE_TYPE P
                           ON I.DEBATE_TYPE_ID = P.DEBATE_TYPE_ID
                      JOIN TBL_DEBATE_BOOK DB
                           ON I.DEBATE_ID = DB.DEBATE_ID
                      JOIN TBL_BOOK B
                           ON DB.ISBN13 = B.ISBN13
    <![CDATA[    WHERE (MEETING_TYPE='오프라인' OR MEETING_TYPE='온라인') AND DEBATE_END_DATE > SYSDATE ]]>
        ORDER BY DEBATE_ID DESC
</select>
<select id="selectlib">
    SELECT LIBCODE, LIBNAME, ADDRESS, CLOSED, HOMEPAGE, LATITUDE, LONGITUDE, TEL
    FROM TBL_LIB
    WHERE LIBNAME LIKE '%' || #{libname} || '%'
</select>

</mapper>













